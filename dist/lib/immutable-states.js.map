{"version":3,"sources":["immutable-states.js"],"names":[],"mappings":";;;;AAIgB,eAAe,GAAf,eAAe;;;;;;;;;;;;;;;;;AAiBf,eAAe,GAAf,eAAe,+NAnBkB,QAAQ,EAFzD,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,AAInB,SAAS,eAAe,wFAAgE,KAA/D,KAAK,QAAE,IAAI,QAAE,iBAAiB,OAAE,iBAAiB,GAC3E,aAAa,GAIb,aAAa,GAKX,eAAe,GAAqB,OAAM,gCAVc,iBAAiB,2DAAG,SAAS,iBAC3F,IAAI,aAAa,GAAG,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,KAAK,CAAC,AACtD,IAAI,CAAC,UAJE,QAAQ,EAID,aAAa,CAAC,EAC1B,MAAM,IAAI,KAAK,+BAA4B,IAAI,qDAAiD,CAAC,AAEnG,IAAI,aAAa,GAAG,CAAC,CAAC,MAAM,CAAC,EAAE,EAAE,aAAa,EAAE,iBAAiB,CAAC,CAAC,AACnE,IAAI,iBAAiB,EACnB,iBAAiB,CAAC,OAAO,CAAC,UAAC,IAAI,EAAK,CAAE,OAAO,aAAa,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,CAAC,AAEvE,IAAI,IAAI,IAAI,EAAE,EAAE,CACd,IAAI,eAAe,GAAG,UAZK,UAAU,EAYJ,IAAI,CAAC,EAAE,OAAM,GAAG,UAZlC,UAAU,EAYmC,IAAI,CAAC,CAAC,oBAC3C,KAAK,QAAE,OAAM,4BAAI,eAAe,EAAG,aAAa,qCACxE,MAAM,CACL,OAAO,aAAa,CAAC,CACtB,CACF,CAAA,AAEM,SAAS,eAAe,CAAC,KAAK,EAAE,IAAI,EAAE;AAC3C,MAAI,MAAM,GAAG,UApBI,UAAU,EAoBH,IAAI,CAAC,EAAE,EAAE,GAAG,UApBP,UAAU,EAoBQ,IAAI,CAAC,CAAC;AACrD,SAAO,eAAe,CAAC,KAAK,EAAE,MAAM,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CACjD","file":"immutable-states.js","sourcesContent":["let _ = require('lodash');\n\nimport { isObject, parentPath, idFromPath } from './util';\n\nexport function stateWithUpdate(state, path, changedProperties, deletedProperties = undefined) {\n  let currentObject = path ? _.get(state, path) : state;\n  if (!isObject(currentObject))\n    throw new Error(`Cannot apply update at '${path}': the thing under this path is not an object.`);\n\n  let changedObject = _.extend({}, currentObject, changedProperties);\n  if (deletedProperties)\n    deletedProperties.forEach((prop) => { delete changedObject[prop]; });\n\n  if (path != '') {\n    let changedObjectId = idFromPath(path), parent = parentPath(path);\n    return stateWithUpdate(state, parent, {[changedObjectId]: changedObject});\n  } else {\n    return changedObject;\n  }\n}\n\nexport function stateWithDelete(state, path) {\n  let parent = parentPath(path), id = idFromPath(path);\n  return stateWithUpdate(state, parent, {}, [id]);\n}\n"],"sourceRoot":"../../lib"}