{"version":3,"sources":["immutable-states.js"],"names":[],"mappings":";;AAEiD,QAAQ,EAFzD,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAInB,SAAS,eAAe,wFAAgE,KAA/D,KAAK,QAAE,IAAI,QAAE,iBAAiB,OAAE,iBAAiB;AAC3E,iBAAa;;;;AAIb,iBAAa;;;;;AAKX,mBAAe,GAAqB,OAAM,gCAVc,iBAAiB,2DAAG,SAAS,iBAC3F,IAAI,aAAa,GAAG,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,KAAK,CAAC,AACtD,IAAI,CAAC,oBAAS,aAAa,CAAC,EAC1B,MAAM,IAAI,KAAK,+BAA4B,IAAI,qDAAiD,CAAC,AAEnG,IAAI,aAAa,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,EAAE,aAAa,EAAE,iBAAiB,CAAC,CAAC,AACpH,IAAI,iBAAiB,EACnB,iBAAiB,CAAC,OAAO,CAAC,UAAC,IAAI,EAAK,CAAE,OAAO,aAAa,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,CAAC,AAEvE,IAAI,IAAI,IAAI,EAAE,EAAE,CACd,IAAI,eAAe,GAAG,sBAAW,IAAI,CAAC,EAAE,OAAM,GAAG,sBAAW,IAAI,CAAC,CAAC;AAC3C,WAAK,QAAE,OAAM,4BAAI,eAAe,EAAG,aAAa,qCACxE;AAAM;AACL,aAAO,aAAa,CAAC,CACtB,CACF,CAAA;;;;AAEM,SAAS,eAAe,CAAC,KAAK,EAAE,IAAI,EAAE;AAC3C,MAAI,MAAM,GAAG,sBAAW,IAAI,CAAC,EAAE,EAAE,GAAG,sBAAW,IAAI,CAAC,CAAC;AACrD,SAAO,eAAe,CAAC,KAAK,EAAE,MAAM,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CACjD","file":"immutable-states.js","sourcesContent":["let _ = require('lodash');\n\nimport { isObject, parentPath, idFromPath } from './util';\n\nexport function stateWithUpdate(state, path, changedProperties, deletedProperties = undefined) {\n  let currentObject = path ? _.get(state, path) : state;\n  if (!isObject(currentObject))\n    throw new Error(`Cannot apply update at '${path}': the thing under this path is not an object.`);\n\n  let changedObject = _.extend(Object.create(Object.getPrototypeOf(currentObject)), currentObject, changedProperties);\n  if (deletedProperties)\n    deletedProperties.forEach((prop) => { delete changedObject[prop]; });\n\n  if (path != '') {\n    let changedObjectId = idFromPath(path), parent = parentPath(path);\n    return stateWithUpdate(state, parent, {[changedObjectId]: changedObject});\n  } else {\n    return changedObject;\n  }\n}\n\nexport function stateWithDelete(state, path) {\n  let parent = parentPath(path), id = idFromPath(path);\n  return stateWithUpdate(state, parent, {}, [id]);\n}\n"],"sourceRoot":"../../lib"}