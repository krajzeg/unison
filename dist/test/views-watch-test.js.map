{"version":3,"sources":["views-watch-test.js"],"names":[],"mappings":"aAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC;AACpC,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/B,IAAI,KAAK,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC;AACpC,IAAI,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;;AAE7B,QAAQ,CAAC,uBAAuB,EAAE,YAAM;AACtC,MAAI,EAAE,YAAA,CAAC;AACP,YAAU,CAAC,YAAM;AACf,MAAE,GAAG,MAAM,CAAC,EAAC,KAAK,EAAE,EAAE,EAAC,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAC1C,CAAC,CAAC;;;AAEH,IAAE,CAAC,2DAA2D,EAAE,YAAM;AACpE,QAAI,KAAK,GAAG,EAAC,UAAU,EAAE,KAAK,CAAC,GAAG,EAAE,EAAE,SAAS,EAAE,KAAK,CAAC,GAAG,EAAE,EAAC,CAAC;AAC9D,MAAE,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;;AAEzB,MAAE,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,EAAC,IAAI,EAAE,QAAQ,EAAC,CAAC,CAAC;AAClC,MAAE,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,CAAC;;AAEtB,UAAM,CAAC,EAAE,CAAC,KAAK,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;AACvC,UAAM,CAAC,EAAE,CAAC,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CACvC,CAAC,CAAC;;;AAEH,IAAE,CAAC,sEAAsE,EAAE,YAAM;AAC/E,QAAI,KAAK,GAAG,EAAC,UAAU,EAAE,KAAK,CAAC,GAAG,EAAE,EAAC,CAAC;;AAEtC,MAAE,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;AACzB,MAAE,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,CAAC;;AAEtB,MAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;AACxB,MAAE,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;;AAE7B,UAAM,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CACrC,CAAC,CAAC,CACJ,CAAC,CAAC","file":"views-watch-test.js","sourcesContent":["let _ = require('lodash');\nlet assert = require('chai').assert;\nlet unison = require('../lib');\nlet views = require('../lib').views;\nlet sinon = require('sinon');\n\ndescribe(\"Views plugin: watch()\", () => {\n  let $$;\n  beforeEach(() => {\n    $$ = unison({stuff: {}}).plugin(views());\n  });\n\n  it(\"should bind all methods matching event names as listeners\", () => {\n    let spies = {childAdded: sinon.spy(), destroyed: sinon.spy()};\n    $$('stuff').watch(spies);\n\n    $$('stuff').add({name: \"hammer\"});\n    $$('stuff').destroy();\n\n    assert.ok(spies.childAdded.calledOnce);\n    assert.ok(spies.destroyed.calledOnce);\n  });\n\n  it(\"should automatically unbind all listeners when the node is destroyed\", () => {\n    let spies = {childAdded: sinon.spy()};\n\n    $$('stuff').watch(spies);\n    $$('stuff').destroy();\n\n    $$('').add('stuff', {});\n    $$('stuff').add('psych', {});\n\n    assert.ok(!spies.childAdded.called);\n  });\n});"],"sourceRoot":"../../test"}